<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <title>Игра</title>
    <link rel="stylesheet" href="css\style-source.css">
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>

<body class="visible">
    <footer class="show-roles">
        <div class="player" id="player_1">
            <div class="photo"></div>
            <div class="bg"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">1</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_2">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">2</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_3">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">3</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_4">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">4</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_5">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">5</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_6">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">6</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_7">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">7</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_8">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">8</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_9">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">9</div>
            <div class="nick"></div>
        </div>
        <div class="player" id="player_10">
            <div class="bg"></div>
            <div class="photo"></div>
            <div class="status"></div>
            <div class="role"></div>
            <div class="number">10</div>
            <div class="nick"></div>
        </div>
    </footer>

    <script>
        const ps = new BroadcastChannel('panel_status');
        const pl = new BroadcastChannel('player_list');
        const cl = new BroadcastChannel('class_list');


        $(document).ready(function() {
            var element = document.getElementsByTagName("body")[0];
        });

        pl.onmessage = (event) => {
            player_list = event.data.split('|');
            document.getElementById(player_list[0]).querySelectorAll('.nick')[0].innerHTML = player_list[1];
            document.getElementById(player_list[0]).querySelectorAll('.photo')[0].style.backgroundImage = 'url("content/photo/' + player_list[1] + '.png")';
        }
        cl.onmessage = (event) => {
            class_list = event.data.split('|');
            document.getElementById(class_list[0]).setAttribute('class', class_list[1]);
        }

        ps.onmessage = (event) => {
            panel_status = event.data.split('|');
            document.getElementsByTagName(panel_status[0])[0].setAttribute('class', panel_status[1]);
        }
    </script>
</body>

</html>